/*
  js-playground/pjax
  https://github.com/js-playground/pjax
*/
var Pjax=window.Pjax||function(e,t){function n(e){return new l(e)}function i(){return(new Date).getTime()+Math.random()}function o(e){var n,i,o,a,r=e.querySelectorAll("script"),s=r.length;for(o=0;s>o;o++)a=r[o],n=a.innerHTML,i=t.createElement("script"),""!==a.src?i.src=a.src:i.text=n,a.parentNode.replaceChild(i,a)}function a(e){d.hasOwnProperty(e)&&(clearTimeout(d[e]),delete d[e]),h.hasOwnProperty(e)&&delete h[e];var t=p.indexOf(e);-1!=t&&p.splice(t,1)}function r(e,n){if(null==n.state)return f=null,location.reload(),!1;var i=JSON.parse(n.state),a=f;f=i.id;var r=h[i.id];if(void 0==r)return location.reload(),!1;var s=t.querySelector('[pjax-ct-id="'+a+'"]');return void 0==s?(location.reload(),!1):(s.innerHTML=r,s.setAttribute("pjax-ct-id",i.id),void o(s))}function s(e,t){var n,i={};for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);return(0===i.cacheTimeout||0===i.maxCacheLength)&&(i.cache=!1),i}function u(t){t.pushStateSupported=e.history&&e.history.pushState&&e.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),c||(c=!0,e.addEventListener("popstate",function(e){null!==f&&r(this,e)}))}function l(e){this.options=s(this.options,e),u(this)}var c=!1,p=[],h={},d={},f=null;return l.prototype.options={push:!0,replace:!1,onUpdateCachedValues:null,onBusy:null,onComplete:null,onSuccess:null,onFailure:null,cache:!1,cacheTimeout:3e4,maxCacheLength:-1,method:"POST",headers:null,autoReplaceHTML:!0},l.prototype.isPushStateSupported=function(){return this.pushStateSupported},l.prototype.Load=function(n,r,u,l,c){if((this.options.push||this.options.replace)&&!this.isPushStateSupported)return!0;null!=n&&n.preventDefault();var y=null==c?this.options:s(this.options,c),S={id:i()},T=-1==r.indexOf("?")?r+"?pjax=1":r,m=new XMLHttpRequest;if(y.autoReplaceHTML&&d.hasOwnProperty(f)&&(null!=y.onUpdateCachedValues&&(y.onUpdateCachedValues(f),clearTimeout(d[f]),h[f]=l.innerHTML,d[f]=setTimeout(function(){a(f)},y.cacheTimeout)),e.location.href==r))return!1;if(null===f&&y.cache&&y.push&&!y.replace&&y.autoReplaceHTML&&(newState={id:S.id},f=newState.id,e.history.replaceState(JSON.stringify(newState),l.title||t.title,e.location.href),l.setAttribute("pjax-ct-id",newState.id),p.push(newState.id),h[newState.id]=l.innerHTML,d[newState.id]=setTimeout(function(){a(newState.id)},y.cacheTimeout),S.id=i()),null!=y.onBusy&&y.onBusy(u,l),m.onreadystatechange=function(){if(4===m.readyState)if(null!=y.onComplete&&y.onComplete(u,l,m),200===m.status)y.autoReplaceHTML&&(l.innerHTML=m.responseText,y.cache&&y.push&&(y.replace&&d.hasOwnProperty(f)?(clearTimeout(d[f]),h[f]=l.innerHTML,d[f]=setTimeout(function(){a(f)},y.cacheTimeout)):(f=S.id,l.setAttribute("pjax-ct-id",S.id),y.maxCacheLength>0&&p.length===y.maxCacheLength&&a(p[0]),p.push(newState.id),h[S.id]=l.innerHTML,d[S.id]=setTimeout(function(){a(S.id)},y.cacheTimeout))),o(l),y.push&&(y.replace?e.history.replaceState(JSON.stringify(S),l.title||t.title,r):e.history.pushState(JSON.stringify(S),l.title||t.title,r),t.title=l.title||t.title)),y.onSuccess&&y.onSuccess(u,l,m);else{if(y.onFailure)return void y.onFailure(u,l,m);y.autoReplaceHTML&&(l.innerHTML=m.responseText,o(l))}},m.open("GET",T,!0),m.setRequestHeader("X-Pjax","true"),null!=y.headers)for(key in y.headers)y.headers.hasOwnProperty(key)&&m.setRequestHeader(key,y.headers[key]);m.send()},l.prototype.Submit=function(e,t,n,i,a,r){null!=e&&e.preventDefault();var u=null==r?this.options:s(this.options,r),l="FORM"==a.tagName?!0:!1,c=l?new FormData(a):null,p=new XMLHttpRequest;if(null!=u.onBusy&&u.onBusy(n,i),p.onreadystatechange=function(){if(4===p.readyState)if(null!=u.onComplete&&u.onComplete(n,i,p),200===p.status)u.autoReplaceHTML&&(i.innerHTML=p.responseText,o(i)),u.onSuccess&&u.onSuccess(n,i,p);else{if(u.onFailure)return void u.onFailure(n,i,p);u.autoReplaceHTML&&(i.innerHTML=p.responseText,o(i))}},p.open(u.method,t,!0),p.setRequestHeader("X-Pjax","true"),null!=u.headers)for(key in u.headers)u.headers.hasOwnProperty(key)&&p.setRequestHeader(key,u.headers[key]);p.send(c)},self={New:n}}(window,document);